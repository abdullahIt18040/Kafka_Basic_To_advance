## Consumer Offset ржХрзА?

Kafka-рждрзЗ ржпржЦржи ржХрзЛржирзЛ consumer (ржЧрзНрж░рж╛рж╣ржХ) ржХрзЛржирзЛ topic ржерзЗржХрзЗ data ржкрзЬрзЗ, рждржЦржи Kafka рж╕рзЗржЗ consumer ржХрзЛржерж╛рзЯ ржкрж░рзНржпржирзНржд ржкрзЬрзЗржЫрзЗ рждрж╛ offset ржжрж┐рзЯрзЗ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ рж░рж╛ржЦрзЗред

 Offset рж╣рж▓рзЛ ржкрзНрж░рждрж┐ржЯрж┐ message-ржПрж░ ржЬржирзНржп ржПржХржЯрж┐ unique number (0, 1, 2, 3, ... ржЗрждрзНржпрж╛ржжрж┐)ред
ржПржЯрж╛ message-ржПрж░ position ржмрж╛ index ржПрж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рзЗред
```
 ржЙржжрж╛рж╣рж░ржг:

ржзрж░рзБржи ржЖржкржирж╛рж░ ржПржХржЯрж╛ topic ржЖржЫрзЗ тАФ orders
ржПрждрзЗ рзлржЯрж┐ message ржЖржЫрзЗ:

Offset	Message
0	Order #1
1	Order #2
2	Order #3
3	Order #4
4	Order #5

ржПржЦржи ржЖржкржирж╛рж░ consumer ржпржжрж┐ ржкрзНрж░ржержо рзйржЯрж╛ message ржкрзЬрзЗ,
рждрж╛рж╣рж▓рзЗ Kafka ржоржирзЗ рж░рж╛ржЦржмрзЗ ржпрзЗ consumer-ржПрж░ offset ржПржЦржи 2 ржкрж░рзНржпржирзНржд ржкрзМржБржЫрзЗржЫрзЗред

 ржорж╛ржирзЗ consumer 0, 1, 2 offset ржкрж░рзНржпржирзНржд message consume ржХрж░рзЗржЫрзЗред

 Consumer Offset ржХрзЗржи ржжрж░ржХрж╛рж░:
ржХрж╛рж░ржг	ржмрзНржпрж╛ржЦрзНржпрж╛
ЁЯФБ Restart ржПрж░ ржкрж░ ржерзЗржХрзЗ ржЖржмрж╛рж░ рж╢рзБрж░рзБ ржХрж░рж╛рж░ ржЬржирзНржп	ржпржжрж┐ consumer ржмржирзНржз рж╣рзЯрзЗ ржпрж╛рзЯ ржмрж╛ restart рж╣рзЯ, Kafka ржЬрж╛ржирзЗ рж╢рзЗрж╖ ржХрзЛржи offset ржкрж░рзНржпржирзНржд message ржкрзЬрж╛ рж╣рзЯрзЗржЫрж┐рж▓ред ржлрж▓рзЗ consumer рж╕рзЗржЦрж╛ржи ржерзЗржХрзЗржЗ ржЖржмрж╛рж░ рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗред
тЬЕ Duplicate ржПрзЬрж╛ржирзЛрж░ ржЬржирзНржп	Offset ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ рж░рж╛ржЦрж▓рзЗ ржПржХржЗ message ржмрж╛рж░ржмрж╛рж░ ржкрзЬрж╛ рж╣рзЯ ржирж╛ред
ЁЯУК Monitoring ржУ Lag Check ржХрж░рж╛рж░ ржЬржирзНржп	Offset ржерзЗржХрзЗ ржмрзЛржЭрж╛ ржпрж╛рзЯ consumer ржХржд ржкрж┐ржЫрж┐рзЯрзЗ ржЖржЫрзЗ (lag) ржмрж╛ ржХржд message ржПржЦржирзЛ consume рж╣рзЯржирж┐ред
ЁЯзй Offset ржХрзЛржерж╛рзЯ рж╕ржВрж░ржХрзНрж╖ржг рж╣рзЯ?

Kafka offset рж╕рж╛ржзрж╛рж░ржгржд __consumer_offsets ржирж╛ржорзЗрж░ ржПржХржЯрж┐ internal topic-ржП рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗред
ржПржЗ ржЯржкрж┐ржХ Kafka ржирж┐ржЬрзЗржЗ manage ржХрж░рзЗред

ржЙржжрж╛рж╣рж░ржг:

ржзрж░рзБржи consumer group-ржПрж░ ржирж╛ржо group1
topic orders
partition 0 ржПрж░ рж╕рж░рзНржмрж╢рзЗрж╖ offset рж╣рж▓рзЛ 100

consumer ржпржжрж┐ offset 95 ржкрж░рзНржпржирзНржд ржкрзЬрзЗ ржерж╛ржХрзЗ,
рждрж╛рж╣рж▓рзЗ consumer lag = 100 - 95 = 5 message ржкрж┐ржЫрж┐рзЯрзЗ ржЖржЫрзЗред
```
 рж╕ржВржХрзНрж╖рзЗржкрзЗ ржмрж╛ржВрж▓рж╛ рж╕ржВржЬрзНржЮрж╛:

Consumer Offset рж╣рж▓рзЛ Kafka-рж░ ржПржХржЯрж┐ рж╕ржВржЦрзНржпрж╛, ржпрж╛ ржмрж▓рзЗ ржжрзЗрзЯ ржХрзЛржирзЛ consumer ржХрзЛржи message ржкрж░рзНржпржирзНржд ржкрзЬрзЗржЫрзЗред
ржПрж░ ржорж╛ржзрзНржпржорзЗ Kafka consumer-ржПрж░ ржЕржмрж╕рзНржерж╛ржи ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ, ржпрж╛рждрзЗ ржкрзБржирж░рж╛рзЯ рж╢рзБрж░рзБ рж╣рж▓рзЗ ржмрж╛ рждрзНрж░рзБржЯрж┐ ржШржЯрж▓рзЗ ржбрзЗржЯрж╛ рж╣рж╛рж░рж╛рзЯ ржирж╛ ржПржмржВ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржирж╛ рж╣рзЯред
